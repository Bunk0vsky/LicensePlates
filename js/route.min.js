const routes = {
    "/": {
      template: "/templates/index.min.html",
      title: "Home",
      description: "Strona główna",
    },
    promocje: {
      template: "/templates/promo.min.html",
      title: "Promocje",
      description: "Promocje",
    },
    kontakt: {
      template: "/templates/contact.min.html",
      title: "Skontaktuj się",
      description: "Strona kontaktowa",
    },
    sklep: {
      template: "/templates/shop.min.html",
      script: "/js/infinite-scroll.js",
      title: "Sklep",
      description: "Sklep",
    },
    dostawa: {
      template: "/templates/delivery.min.html",
      title: "Dostawa",
      description: "Dostawa",
    },
  },
  locationHandler = async (hash, isEval = !0) => {
    var location = hash || window.location.hash.replace("#", "");
    0 == location.length && (location = "/");
    const route = routes[location],
      routeScript = routes[location]?.script || "",
      html = await fetch(route.template).then((t) => t.text()),
      script = routeScript && (await fetch(routeScript).then((t) => t.text()));
    (document.getElementById("content").innerHTML = html),
      translation(),
      (document.title = route.title),
      document
        .querySelector('meta[name="description"]')
        .setAttribute("content", route.description),
      script && isEval && eval(script);
  };
window.addEventListener("hashchange", function () {
  locationHandler(), translation();
});
const elLogo = document.getElementById("main-nav-logo"),
  elMain = document.getElementById("main-nav-main"),
  elPromo = document.getElementById("main-nav-promo"),
  elShop = document.getElementById("main-nav-shop"),
  elDelivery = document.getElementById("main-nav-delivery"),
  elContact = document.getElementById("main-nav-contact");
elPromo.addEventListener("click", function (t) {
  locationHandler("promocje"), getPromoPlates();
}),
  elShop.addEventListener("click", async (t) => {
    locationHandler("sklep"),
      getStates(),
      removeElements(),
      (currentPage = 1),
      (platesStartRange = 0),
      (platesEndRange = 5);
    const e = await displayMore();
    infiniteSCroll(e?.count || 0);
  }),
  elMain.addEventListener("click", function () {
    locationHandler("/"), getPlates();
  }),
  elLogo.addEventListener("click", function () {
    locationHandler("/"), getPlates();
  }),
  elContact.addEventListener("click", function () {
    locationHandler("kontakt");
    document.querySelector("footer").classList.add("no-border");
  });
const addBorder = () => {
  window.addEventListener("hashchange", (t) => {
    if ("#kontakt" !== t.currentTarget.location.hash) {
      document.querySelector("footer").classList.remove("no-border");
    }
  });
};
addBorder(),
  elDelivery.addEventListener("click", function () {
    locationHandler("dostawa"), getDelivery();
  }),
  locationHandler();
const contentDiv = document.getElementById("content");
(contentDiv.innerHTML = routes[window.location.pathname]),
  (window.onpopstate = () => {
    contentDiv.innerHTML = routes[window.location.pathname];
  });
