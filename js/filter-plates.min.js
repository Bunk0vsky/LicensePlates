const filterPlates = async (t) => {
    selectState(t?.textContent),
      await resetFilters("Stany Zjednoczone", t?.textContent);
  },
  displayAll = async () => {
    selectCategory(""),
      selectState(""),
      removeElements(),
      (currentPage = 1),
      (platesStartRange = 0),
      (platesEndRange = 20);
    const t = await displayMore();
    infiniteSCroll(t?.count || 0);
    new URLSearchParams(document.location.search);
    const e = new URL(window.location.href);
    e.searchParams.delete("country"),
      e.searchParams.delete("state"),
      window.history.pushState(null, "", e.toString());
  };
var sortBy = "country asc, state asc",
  platesStartRange = 0,
  platesEndRange = 20,
  selectedCategory = "",
  selectedState = "";
const displayMore = async (t, e) => {
  const a = t || selectedCategory,
    n = a ? `&& country == "${a}"` : "",
    s = (void 0 === e || "undefined" === e ? null : e) || selectedState,
    l = s ? `&& state == "${s}"` : "";
  let o = encodeURIComponent(
      `{\n      "list":*[_type == "plate" ${n} ${l}] {\n      ...,\n      "imageUrl": src.asset->url\n    } | order(${sortBy}) [${platesStartRange}...${platesEndRange}],\n      "count": count(*[_type == "plate" ${n} ${l}]{\n        ...,\n      }),\n  }\n    \n  `
    ),
    r = `https://${PROJECT_ID}.api.sanity.io/v2021-10-21/data/query/${DATASET}?query=${o}`;
  const c = await fetch(r);
  let { result: d } = await c.json();
  if (d?.list.length > 0) {
    const t = document.getElementById("loader");
    t?.classList?.add("hidden");
    let e = document.getElementById("shop-bar");
    if (e) {
      const t = e.querySelectorAll(".shop"),
        a = [];
      t.forEach((t) => a.push(t.getAttribute("data-modal")));
      d.list
        .filter((t) => -1 === a.indexOf(t._id))
        .forEach((t) => {
          generatePlate(t, e);
        });
    }
  }
  return d;
};
